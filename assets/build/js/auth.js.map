{"version":3,"file":"js/auth.js","mappings":"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","sources":["webpack://assets/./src/js/auth.js"],"sourcesContent":["document.addEventListener(\"DOMContentLoaded\", function (e) {\n  const showAuthBtn = document.getElementById(\"demetrius1-show-auth-form\"),\n    authContainer = document.getElementById(\"demetrius1-auth-container\"),\n    close = document.getElementById(\"demetrius1-auth-close\"),\n    authForm = document.getElementById(\"demetrius1-auth-form\"),\n    status = authForm.querySelector('[data-message=\"status\"]');\n\n  showAuthBtn.addEventListener(\"click\", () => {\n    authContainer.classList.add(\"show\");\n    showAuthBtn.parentElement.classList.add(\"hide\");\n  });\n\n  close.addEventListener(\"click\", () => {\n    authContainer.classList.remove(\"show\");\n    showAuthBtn.parentElement.classList.remove(\"hide\");\n  });\n\n  authForm.addEventListener(\"submit\", (e) => {\n    e.preventDefault();\n\n    resetMessages();\n\n    // collect all data\n    let data = {\n      name: authForm.querySelector('[name=\"username\"]').value,\n      password: authForm.querySelector('[name=\"password\"]').value,\n      nonce: authForm.querySelector('[name=\"demetrius1_auth\"]').value,\n    };\n\n    // validate everything\n    if (!data.name || !data.password) {\n      status.innerHTML = \"Missing Data\";\n      status.classList.add(\"error\");\n      return;\n    }\n\n    // ajax http post request\n    let url = authForm.dataset.url;\n    let params = new URLSearchParams(new FormData(authForm));\n\n    authForm.querySelector('[name=\"submit\"]').value = \"Logging in...\";\n    authForm.querySelector('[name=\"submit\"]').disabled = true;\n\n    fetch(url, {\n      method: \"POST\",\n      body: params,\n    })\n      .then((res) => res.json())\n      .catch((error) => {\n        resetMessages();\n      })\n      .then((response) => {\n        resetMessages();\n\n        if (response === 0 || !response.status) {\n          status.innerHTML = response.message;\n          status.classList.add(\"error\");\n          return;\n        }\n\n        status.innerHTML = response.message;\n        status.classList.add(\"success\");\n\n        authForm.reset();\n        window.location.reload();\n      });\n  });\n\n  // reset all the messages\n  function resetMessages() {\n    status.innerHTML = \"\";\n    status.classList.remove(\"success\", \"error\");\n\n    authForm.querySelector('[name=\"submit\"]').value = \"Login\";\n    authForm.querySelector('[name=\"submit\"]').disabled = false;\n  }\n});\n"],"names":["document","addEventListener","e","showAuthBtn","getElementById","authContainer","close","authForm","status","querySelector","classList","add","parentElement","remove","preventDefault","resetMessages","data","name","value","password","nonce","innerHTML","url","dataset","params","URLSearchParams","FormData","disabled","fetch","method","body","then","res","json","catch","error","response","message","reset","window","location","reload"],"sourceRoot":""}